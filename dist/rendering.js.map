{"version":3,"sources":["../src/rendering.js"],"names":["link","scope","elem","attrs","ctrl","mapContainer","find","MapChart","newInstance","element","calRoundSize","val","type","Min_Size","minSize","maxSize","value","province","Math","round","chart","mapType","seriesNameObj","currSeriesName","container","echarts","init","option","title","text","left","textStyle","color","tooltip","trigger","padding","backgroundColor","formatter","params","tipVal","tipHTML","data","Array","length","push","name","seriesName","join","legend","orient","icon","selectedMode","selected","toolbox","show","itemSize","feature","myTool1","currentProvince","onclick","pointName","undefined","city","areaId","update","i","len","templateSrv","variables","variable","setValue","variableSrvT","variableUpdated","myTool2","updateMap","iconStyle","emphasis","geo","map","label","itemStyle","normal","borderColor","borderWidth","areaColor","x","y","r","colorStops","offset","globalCoord","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","aspectScale","series","coordinateSystem","symbolSize","showEffectOn","rippleEffect","period","scale","brushType","hoverAnimation","position","on","obj","indexOf","destProvinceData","provinceData","dstSeries","citiesData","destCityData1","destCityData2","isDirectCity","includes","popList","currPopData","popData","filter","parent","popIdList","id","popNameList","selectedInfo","selKey","hasOwnProperty","iphone7","iphone8","iphonex","setOption","resize","dispose","events","render","renderingCompleted"],"mappings":"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","file":"rendering.js","sourcesContent":["import echarts from './lib/echarts.min';\n\nexport default function link(scope, elem, attrs, ctrl) {\n  const mapContainer = elem.find('.chinamap-panel');\n  // 简单的饼图自动绘图工具\n  let MapChart = (function() {\n    //text, subtext, legends, values, message\n    let newInstance = function(element) {\n      // 计算地图上的圆圈大小\n      let calRoundSize = function(val, type) {\n        const Min_Size = 10;\n        let minSize = 0;\n        let maxSize = 0;\n        let value = val[2];\n\n        if (ctrl.province) {\n          minSize = ctrl['minPopData'][type];\n          maxSize = ctrl['maxPopData'][type];\n        } else {\n          minSize = ctrl['minProvinceData'][type];\n          maxSize = ctrl['maxProvinceData'][type];\n        }\n\n        if (minSize === maxSize) {\n          return 12;\n        } else {\n          return Min_Size + Math.round((value - minSize) / (maxSize - minSize) * 5);\n        }\n      };\n      let chart = {};\n      let mapType = [\n        'china',\n        // 23个省\n        '广东', '青海', '四川', '海南', '陕西',\n        '甘肃', '云南', '湖南', '湖北', '黑龙江',\n        '贵州', '山东', '江西', '河南', '河北',\n        '山西', '安徽', '福建', '浙江', '江苏',\n        '吉林', '辽宁',\n        //'台湾',\n        // 5个自治区\n        '新疆', '广西', '宁夏', '内蒙古', '西藏',\n        // 4个直辖市\n        '北京', '天津', '上海', '重庆',\n        // 2个特别行政区\n        '香港', '澳门',\n      ];\n      let seriesNameObj = {\n        'iPhone 7': 'iphone7',\n        'iPhone 8': 'iphone8',\n        'iPhone X': 'iphonex',\n      };\n      let currSeriesName = 'iPhone 7';\n      chart.container = echarts.init(element[0], 'dark');\n      chart.option = {\n        title: {\n          text: '全国地图',\n          left: 'center',\n          textStyle: {\n            color: '#fff',\n          },\n        },\n        tooltip: {\n          trigger: 'item',\n          padding: 10,\n          backgroundColor: 'rgba(20,20,20,0.8)',\n          formatter: function(params) {\n            let tipVal = 0;\n            let tipHTML = [];\n\n            if (params) {\n              if (params.data && params.data.value instanceof Array && params.data.value.length > 2) {\n                tipVal = params.data.value[2];\n              }\n\n              tipHTML.push('<div style=\"font-size: 16px;color: ', params.color, ';\">', params.name, '</div>');\n              tipHTML.push(params.seriesName, '：', tipVal);\n            }\n\n            return tipHTML.join('');\n          },\n        },\n        legend: {\n          orient: 'vertical',\n          left: 'right',\n          data: [\n            { name: 'iPhone 7', icon: 'roundRect', textStyle: { color: '#f4e925' } },\n            { name: 'iPhone 8', icon: 'roundRect', textStyle: { color: '#f4e925' } },\n            { name: 'iPhone X', icon: 'roundRect', textStyle: { color: '#f4e925' } },\n          ],\n          selectedMode: 'single',\n          selected: {\n            'iPhone 7': true,\n            'iPhone 8': false,\n            'iPhone X': false,\n          },\n        },\n        toolbox: {\n          show: true,\n          itemSize: 30,\n          feature: {\n            myTool1: {\n              show: ctrl.currentProvince === 'china',\n              title: '返回',\n              icon: 'path://M512 64C264.8 64 64 264.8 64 512s200.8 448 448 448 448-200.8 448-448S759.2 64 512 '\n                + '64z m158.4 674.4L625.6 784l-272-272 272-272 45.6 45.6L444 512l226.4 226.4z',\n              onclick: function() {\n                ctrl.pointName = '';\n                ctrl.province = undefined;\n                ctrl.city = undefined;\n                ctrl.areaId = undefined;\n                chart.update();\n\n                // 变量置为All\n                for (let i = 0, len = ctrl.templateSrv.variables.length; i < len; i++) {\n                  let variable = ctrl.templateSrv.variables[i];\n\n                  if (variable.name === 'popId' || variable.name === 'popName') {\n                    variable.setValue({\n                      text: 'All',\n                      value: ['$__all'],\n                    });\n                    ctrl.variableSrvT.variableUpdated(variable, true);\n                  } else if (variable.name === 'areaName') {\n                    variable.setValue({\n                      text: '全国',\n                      value: '全国',\n                    });\n                    ctrl.variableSrvT.variableUpdated(variable, true);\n                  }\n                }\n              }\n            },\n            myTool2: {\n              show: ctrl.currentProvince !== 'china',\n              title: '主页',\n              icon: 'path://M953.001481 565.581336 557.839513 128.84653c-12.284791-13.568017-28.827559-21.042245-46.639227-21.042245l0 0c-17.768689 0-34.328853 7.474228-46.635133 21.042245L69.394998 565.581336c-8.283664 9.182127-7.560186 23.294542 1.575892 31.600719 4.282536 3.891633 9.657964 5.771447 14.990413 5.771447 6.076392 0 12.173251-2.447748 16.610306-7.390317l95.282087-105.310487 0 358.867344c0 37.017078 30.116925 67.13298 67.137073 67.13298l492.333078 0c37.019125 0 67.13605-30.116925 67.13605-67.13298L824.459896 490.25372l95.281063 105.310487c8.266267 9.179057 22.423709 9.925047 31.606859 1.577938 9.17087-8.351202 9.870812-22.423709 1.570775-31.601742L953.001481 565.581336zM600.715019 871.498724 421.686577 871.498724 421.686577 670.089551c0-12.329816 10.031471-22.379707 22.378683-22.379707l134.2721 0c12.325723 0 22.378683 10.04989 22.378683 22.379707L600.716043 871.498724zM779.744485 849.120041c0 12.322653-10.053983 22.37766-22.38073 22.37766L645.471362 871.497701 645.471362 670.089551c0-37.024242-30.114878-67.13605-67.135026-67.13605L444.064236 602.953502c-37.019125 0-67.134003 30.112832-67.134003 67.13605l0 201.408149L265.035794 871.497701c-12.346189 0-22.37766-10.055007-22.37766-22.37766L242.658134 440.796308l255.123538-281.963837c3.672646-4.086062 8.460696-6.315846 13.417591-6.315846 4.960988 0 9.745968 2.229784 13.418614 6.315846l255.125585 281.963837L779.743462 849.120041z',\n              onclick: function() {\n                ctrl.province = ctrl.currentProvince;\n                ctrl.pointName = ctrl.currentProvince;\n                chart.updateMap();\n                chart.update();\n              }\n            }\n          },\n          iconStyle: {\n            color: 'rgb(255, 255, 255)',\n          },\n          emphasis: {\n            iconStyle: {\n              color: 'rgb(255, 255, 0)',\n            },\n          },\n          left: '1%',\n        },\n        geo: {\n          map: 'china',\n          selectedMode: 'single',\n          label: {\n            show: true,\n            color: '#fff',\n          },\n          itemStyle: {\n            normal: {\n              borderColor: 'rgba(147, 235, 248, 1)',\n              borderWidth: 1,\n              areaColor: {\n                type: 'radial',\n                x: 0.5,\n                y: 0.5,\n                r: 0.8,\n                colorStops: [{\n                  offset: 0,\n                  color: 'rgba(147, 235, 248, 0)', // 0% 处的颜色\n                }, {\n                  offset: 1,\n                  color: 'rgba(147, 235, 248, .2)', // 100% 处的颜色\n                }],\n                globalCoord: false, // 缺省为 false\n              },\n              shadowColor: 'rgba(128, 217, 248, 1)',\n              // shadowColor: 'rgba(255, 255, 255, 1)',\n              shadowOffsetX: -2,\n              shadowOffsetY: 2,\n              shadowBlur: 10,\n            },\n            emphasis: {\n              areaColor: '#389BB7',\n              borderWidth: 0,\n            },\n          },\n          // roam: true,\n          aspectScale: 0.95,\n        },\n        series: [\n          {\n            name: 'iPhone 7',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: [],\n            symbolSize: function(val) {\n              return calRoundSize(val, 'iphone7');\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n              period: 15,\n              scale: 4,\n              brushType: 'fill',\n            },\n            hoverAnimation: true,\n            label: {\n              normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false,\n              },\n              emphasis: {\n                show: true,\n              },\n            },\n            itemStyle: {\n              normal: {\n                color: '#f4e925',\n                shadowBlur: 10,\n                shadowColor: '#333',\n              },\n            },\n          },\n          {\n            name: 'iPhone 8',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: [],\n            symbolSize: function(val) {\n              return calRoundSize(val, 'iphone8');\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n              period: 15,\n              scale: 4,\n              brushType: 'fill',\n            },\n            hoverAnimation: true,\n            label: {\n              normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false,\n              },\n              emphasis: {\n                show: true,\n              },\n            },\n            itemStyle: {\n              normal: {\n                color: '#f4e925',\n                shadowBlur: 10,\n                shadowColor: '#333',\n              },\n            },\n          },\n          {\n            name: 'iPhone X',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: [],\n            symbolSize: function(val) {\n              return calRoundSize(val, 'iphonex');\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n              period: 15,\n              scale: 4,\n              brushType: 'fill',\n            },\n            hoverAnimation: true,\n            label: {\n              normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false,\n              },\n              emphasis: {\n                show: true,\n              },\n            },\n            itemStyle: {\n              normal: {\n                color: '#f4e925',\n                shadowBlur: 10,\n                shadowColor: '#333',\n              },\n            },\n          },\n        ],\n      };\n\n      chart.container.on('legendselectchanged', function(obj) {\n        currSeriesName = obj.name;\n      });\n\n      chart.container.on('click', function(params) {\n        //获取省市名称\n        if (mapType.indexOf(params.name) !== -1) {\n          let destProvinceData = ctrl.provinceData[seriesNameObj[currSeriesName]].find(x => x.name === params.name);\n\n          if (!!!destProvinceData) {\n            //如果该省份没有数据，直接返回\n            return;\n          }\n\n          ctrl.province = params.name;\n          ctrl.city = undefined;\n        } else {\n          let dstSeries = chart.option.series.find(x => x.name === currSeriesName);\n          let citiesData = dstSeries.data;\n\n          if (citiesData instanceof Array && params.name) {\n            let destCityData1 = citiesData.find(x => x.name === params.name);\n            let destCityData2 = citiesData.find(x => x.city === params.name);\n\n            if (!!!destCityData1 && !!!destCityData2) {\n              return;\n            }\n          }\n\n          ctrl.city = params.name;\n        }\n\n        ctrl.isDirectCity = ['北京', '天津', '上海', '重庆', '香港', '澳门'].includes(params.name);\n        ctrl.pointName = params.name;\n        chart.update();\n        chart.updateMap();\n      });\n\n      chart.updateMap = function() {\n        if (!ctrl.pointName) {\n          return;\n        }\n        let popList = [];\n        let currPopData = ctrl.popData[seriesNameObj[currSeriesName]];\n\n        if (typeof(ctrl.city) !== 'undefined' && !ctrl.isDirectCity) {\n          popList = currPopData.filter(x => x.city === ctrl.city);\n\n          if (!popList || popList.length === 0) {\n            popList = currPopData.filter(x => x.name === ctrl.city);\n          }\n        } else {\n          popList = currPopData.filter(x => x.parent === ctrl.province);\n        }\n\n        for (let i = 0, len = ctrl.templateSrv.variables.length; i < len; i++) {\n          let variable = ctrl.templateSrv.variables[i];\n\n          if (variable.name === 'popId') {\n            let popIdList = popList.map(x => '' + x.id);\n            variable.setValue({\n              text: popIdList.join(' + '),\n              value: popIdList,\n            });\n            ctrl.variableSrvT.variableUpdated(variable, true);\n          } else if (variable.name === 'popName') {\n            let popNameList = popList.map(x => '' + x.name);\n            variable.setValue({\n              text: popNameList.join(' + '),\n              value: popNameList,\n            });\n            ctrl.variableSrvT.variableUpdated(variable, true);\n          } else if (variable.name === 'areaName') {\n            variable.setValue({\n              text: ctrl.pointName,\n              value: ctrl.pointName,\n            });\n            ctrl.variableSrvT.variableUpdated(variable, true);\n          }\n        }\n      };\n\n      //==================================================================================\n      // 刷新地图\n      //==================================================================================\n      chart.update = function() {\n        let selectedInfo = chart.option.legend.selected;\n\n        for (let selKey in selectedInfo) {\n          if (selectedInfo.hasOwnProperty(selKey)) {\n            selectedInfo[selKey] = (selKey === currSeriesName);\n          }\n        }\n\n        if (typeof(ctrl.city) !== 'undefined') {\n          return;\n          // chart.option.geo.map = ctrl.province;\n          // chart.option.title.text = ctrl.city;\n        } else if (typeof(ctrl.province) !== 'undefined') {\n          chart.option.geo.map = ctrl.province;\n          chart.option.title.text = ctrl.province;\n          chart.option.series[0].data = ctrl.popData.iphone7.filter(x => x.parent === ctrl.province);\n          chart.option.series[1].data = ctrl.popData.iphone8.filter(x => x.parent === ctrl.province);\n          chart.option.series[2].data = ctrl.popData.iphonex.filter(x => x.parent === ctrl.province);\n        } else {\n          chart.option.geo.map = 'china';\n          chart.option.title.text = '全国';\n          chart.option.series[0].data = ctrl.provinceData.iphone7;\n          chart.option.series[1].data = ctrl.provinceData.iphone8;\n          chart.option.series[2].data = ctrl.provinceData.iphonex;\n        }\n\n        chart.container.setOption(chart.option, true);\n        chart.container.resize();\n      };\n\n      chart.resize = function() {\n        chart.container.resize();\n      };\n\n      chart.dispose = function() {\n        chart.container.dispose();\n      };\n\n      if (ctrl.currentProvince !== 'china') {\n        ctrl.province = ctrl.currentProvince;\n        ctrl.pointName = ctrl.currentProvince;\n        chart.updateMap();\n      }\n      chart.update();\n      return chart;\n    };\n\n    return {\n      newInstance: newInstance,\n    };\n  })();\n\n  ctrl.events.on('render', () => {\n    render();\n    ctrl.renderingCompleted();\n  });\n\n  function render() {\n    if (!ctrl.map) {\n      ctrl.map = MapChart.newInstance(mapContainer, {});\n    } else {\n      ctrl.map.update();\n    }\n  }\n};\n"]}